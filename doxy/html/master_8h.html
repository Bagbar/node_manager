<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>zed-cluster: /home/xubuntu/git/node_manager/slave_background_process/master.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">zed-cluster
   &#160;<span id="projectnumber">0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_102f3f1b110fd30eaa2861e872804240.html">slave_background_process</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">master.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;netinet/ip.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_x_m_l_8h_source.html">XML.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="basics_8h_source.html">basics.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for master.h:</div>
<div class="dyncontent">
<div class="center"><img src="master_8h__incl.png" border="0" usemap="#_2home_2xubuntu_2git_2node__manager_2slave__background__process_2master_8h" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="master_8h__dep__incl.png" border="0" usemap="#_2home_2xubuntu_2git_2node__manager_2slave__background__process_2master_8hdep" alt=""/></div>
<!-- MAP 1 -->
</div>
</div>
<p><a href="master_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsend__info.html">send_info</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsend__file.html">send_file</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fd036f71ef4efa12b5b1d9674657f5a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8h.html#a4fd036f71ef4efa12b5b1d9674657f5a">master_control</a> (int mastBroad_sock)</td></tr>
<tr class="memdesc:a4fd036f71ef4efa12b5b1d9674657f5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets called when Node is elected as master, manages network exploration, job receiving and process distrubution  <a href="#a4fd036f71ef4efa12b5b1d9674657f5a">More...</a><br /></td></tr>
<tr class="separator:a4fd036f71ef4efa12b5b1d9674657f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3314d42f209e07aedcecb0ba4fa50ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8h.html#af3314d42f209e07aedcecb0ba4fa50ab">addNode2List</a> (struct <a class="el" href="structcluster__info.html">cluster_info</a> *clusterInfo_ptr, uint32_t ip_u32, uint8_t *typeAndGroup)</td></tr>
<tr class="memdesc:af3314d42f209e07aedcecb0ba4fa50ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">adds nodes with to clusterInfo with the info of IP, type and group  <a href="#af3314d42f209e07aedcecb0ba4fa50ab">More...</a><br /></td></tr>
<tr class="separator:af3314d42f209e07aedcecb0ba4fa50ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf8f0f293f3ba34130d8c1e2e7229016"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8h.html#adf8f0f293f3ba34130d8c1e2e7229016">readIdentifyAnswers</a> (int receive_sock, struct <a class="el" href="structcluster__info.html">cluster_info</a> *clusterInfo_ptr, uint8_t newList_u8)</td></tr>
<tr class="memdesc:adf8f0f293f3ba34130d8c1e2e7229016"><td class="mdescLeft">&#160;</td><td class="mdescRight">receives the previous triggered identification messages from the network and modifies the clusterIndo  <a href="#adf8f0f293f3ba34130d8c1e2e7229016">More...</a><br /></td></tr>
<tr class="separator:adf8f0f293f3ba34130d8c1e2e7229016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee6054f4ab98bc8dbeaac41e2fe329d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8h.html#aee6054f4ab98bc8dbeaac41e2fe329d7">updateClusterInfo</a> (struct <a class="el" href="structcluster__info.html">cluster_info</a> *clusterInfo_ptr, int receive_sock)</td></tr>
<tr class="memdesc:aee6054f4ab98bc8dbeaac41e2fe329d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">calls readIdentifyAnswers and removes node that are not active from the list  <a href="#aee6054f4ab98bc8dbeaac41e2fe329d7">More...</a><br /></td></tr>
<tr class="separator:aee6054f4ab98bc8dbeaac41e2fe329d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1e8e114a97b6c808d95e6cf1c988d44"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8h.html#af1e8e114a97b6c808d95e6cf1c988d44">send_info</a> (void *send_info_args)</td></tr>
<tr class="memdesc:af1e8e114a97b6c808d95e6cf1c988d44"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends information about the program files to the node  <a href="#af1e8e114a97b6c808d95e6cf1c988d44">More...</a><br /></td></tr>
<tr class="separator:af1e8e114a97b6c808d95e6cf1c988d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa0f6ce76de0ac36e56a082af68c04ce"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8h.html#afa0f6ce76de0ac36e56a082af68c04ce">send_file</a> (void *send_file_args)</td></tr>
<tr class="memdesc:afa0f6ce76de0ac36e56a082af68c04ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends file to the target  <a href="#afa0f6ce76de0ac36e56a082af68c04ce">More...</a><br /></td></tr>
<tr class="separator:afa0f6ce76de0ac36e56a082af68c04ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51d6a5e8639f55156535427341291afc"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8h.html#a51d6a5e8639f55156535427341291afc">start</a> (void *start_args)</td></tr>
<tr class="separator:a51d6a5e8639f55156535427341291afc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af3314d42f209e07aedcecb0ba4fa50ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addNode2List </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcluster__info.html">cluster_info</a> *&#160;</td>
          <td class="paramname"><em>clusterInfo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ip_u32</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>typeAndGroup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>adds nodes with to clusterInfo with the info of IP, type and group </p>
<p>just adds nodes at the end and changes the relevant parameters does not sort the list </p>

</div>
</div>
<a class="anchor" id="a4fd036f71ef4efa12b5b1d9674657f5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int master_control </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mastBroad_sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets called when Node is elected as master, manages network exploration, job receiving and process distrubution </p>

</div>
</div>
<a class="anchor" id="adf8f0f293f3ba34130d8c1e2e7229016"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readIdentifyAnswers </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>receive_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcluster__info.html">cluster_info</a> *&#160;</td>
          <td class="paramname"><em>clusterInfo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>newList_u8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>receives the previous triggered identification messages from the network and modifies the clusterIndo </p>
<p>uses addNode2List when it has the needed information for the list and sorts the it if newList is 0 it checks if the same IP is in the list and marks the nodes as active if it is or adds if it is new and sorts the list if newList is not 0 all received information is added and the list is sorted afterwards. No check for nodes already in the list is done. in any case clusterInfo has to be configured correctly before </p>

</div>
</div>
<a class="anchor" id="afa0f6ce76de0ac36e56a082af68c04ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structsend__file.html">send_file</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>send_file_args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sends file to the target </p>

</div>
</div>
<a class="anchor" id="af1e8e114a97b6c808d95e6cf1c988d44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structsend__info.html">send_info</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>send_info_args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sends information about the program files to the node </p>
<p>At the moment this is only the size of the archive that will be send </p>

</div>
</div>
<a class="anchor" id="a51d6a5e8639f55156535427341291afc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* start </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>start_args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>starts the distrubution and work returns a pointer to an int that has to be freed. </p>

</div>
</div>
<a class="anchor" id="aee6054f4ab98bc8dbeaac41e2fe329d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateClusterInfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcluster__info.html">cluster_info</a> *&#160;</td>
          <td class="paramname"><em>clusterInfo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>receive_sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calls readIdentifyAnswers and removes node that are not active from the list </p>
<p>this may be done in a thread </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 28 2015 13:07:44 for zed-cluster by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
